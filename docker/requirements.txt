# --- Core API & Async ---
fastapi==0.111.0          # Upgraded for better Pydantic v2 support
uvicorn[standard]>=0.31.1,<0.33.0
starlette==0.37.2
pydantic>=2.11.0
pydantic-settings==2.6.0  # Required by mcp 1.24.0 (requires >=2.5.2)
sse-starlette==2.1.0

# --- Database Drivers ---
asyncpg==0.29.0
psycopg[binary]==3.1.18
psycopg2-binary==2.9.9
pgvector==0.2.5
sqlalchemy[asyncio]==2.0.30
redis==5.0.4              # Includes native asyncio support (replaces aioredis)
neo4j-driver==5.20.0
aiomysql==0.2.0
pymysql>=1.1

# --- HTTP & Networking ---
aiohttp==3.9.5
httpx>=0.27.1,<0.28.0  # Required by mcp 1.24.0 (requires >=0.27.1)
grpcio==1.63.0
protobuf==4.25.3          # Aligned with modern Ray
pyOpenSSL>=24.1.0
cryptography>=42.0.5
confluent-kafka>=2.0.0  # Kafka client for event bus integration

# --- Utilities ---
pyyaml==6.0.1
tqdm==4.66.4
prometheus_client==0.20.0
aiorwlock==1.4.0
aiofiles>=23.2.0  # Required for async file operations in MCP tools
jsonschema>=4.22.0
wasmtime==41.0.0  # WASM runtime for PKG policy evaluation

# --- External Binary Dependencies (not Python packages) ---
# OPA (Open Policy Agent) binary is required for PKG WASM compilation
# Install via: curl -L -o opa https://openpolicyagent.org/downloads/latest/opa_linux_amd64 && chmod +x opa && sudo mv opa /usr/local/bin/
# Or see Dockerfile installation steps below
# Verify: opa version

# --- Data Handling ---
pandas==2.2.2
pyarrow==16.1.0
# Align these two specifically for dspy-ai 2.4.9 compatibility
datasets==2.14.7
fsspec==2023.10.0

# --- AI & NLP (Torch installed in Dockerfile) ---
dspy-ai==2.4.9
scikit-learn==1.4.2
# Using recent stable versions compatible with Torch 2.2 and Gemma 3 support
# transformers>=4.49.0 required for Gemma 3 architecture support (gemma3_text)
# tokenizers>=0.21.0 required by transformers>=4.49.0 (Gemma 3 compatibility)
transformers>=4.49.0,<5.0
sentence-transformers==2.7.0
tokenizers>=0.21.0
safetensors==0.4.3
peft>=0.14.0  # Required for LoRA adapters and FunctionGemma intent compiler (upgraded for Gemma 3 compatibility)
openai>=1.30.0
google-generativeai>=0.8.0  # Google Gemini API client for embeddings and generative AI
# bitsandbytes>=0.43.0  # Optional: Only needed for 4-bit quantization on CUDA GPUs

# --- Privacy & Security ---
presidio-analyzer>=2.2.355
presidio-anonymizer>=2.2.355
pyahocorasick>=2.1.0

# --- XGBoost ---
xgboost>=2.0.3
xgboost-ray>=0.1.19

# --- Model Context Protocol (MCP) ---
# Note: mcp-server is a separate package with different versioning (only 0.1.4 available)
# fastmcp is a module within mcp, not a separate package (import: from mcp.server.fastmcp import FastMCP)
mcp==1.24.0
mcp-server==0.1.4